<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>From RC5 and Earlier - mezzio</title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../../../css/mezzio.css" rel="stylesheet">

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../..">mezzio</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v3 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../v3/" class="dropdown-item">Introduction</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../../v3/getting-started/quick-start/" class="dropdown-item">Quick Start</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/features/middleware-types/" class="dropdown-item">Middleware Types</a>
</li>
            
<li>
    <a href="../../../../v3/features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/delegator-factories/" class="dropdown-item">Delegator Factories</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/middleware-container/" class="dropdown-item">The Middleware Container</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/middleware-factory/" class="dropdown-item">The Middleware Factory</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
            
<li>
    <a href="../../../../v3/features/container/config/" class="dropdown-item">Container configuration</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/route-collector/" class="dropdown-item">The Route Collector</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../../v3/features/router/laminas-router/" class="dropdown-item">Using laminas-router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v3/features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../../v3/features/template/request-handlers/" class="dropdown-item">Templated Request Handlers</a>
</li>
            
<li>
    <a href="../../../../v3/features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../../v3/features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../../v3/features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../../v3/features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
<li>
    <a href="../../../../v3/features/modular-applications/" class="dropdown-item">Modular Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Middleware</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/features/middleware/routing-and-dispatch-middleware/" class="dropdown-item">Routing and Dispatch Middleware</a>
</li>
            
<li>
    <a href="../../../../v3/features/middleware/implicit-methods-middleware/" class="dropdown-item">Implicit HEAD and OPTIONS Middleware</a>
</li>
            
<li>
    <a href="../../../../v3/features/middleware/method-not-allowed-middleware/" class="dropdown-item">Returning Method Not Allowed</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v3/features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../../v3/features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../../v3/features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
            
<li>
    <a href="../../../../v3/features/helpers/content-length/" class="dropdown-item">Content-Length Middleware</a>
</li>
            
<li>
    <a href="../../../../v3/features/helpers/template-variable-container/" class="dropdown-item">Template Variable Container</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../../v3/features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">Autowiring routes and pipeline middleware</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/passing-data-between-middleware/" class="dropdown-item">Passing data between middleware</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/path-segregated-routing/" class="dropdown-item">Path-segregated routing</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/access-common-data-in-templates/" class="dropdown-item">Provide Access to Common Data In Templates</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/host-segregated-middleware/" class="dropdown-item">Segregating middleware by host</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/double-pass-middleware/" class="dropdown-item">Using double-pass middleware</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../../v3/cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v3/why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../../../v3/reference/cli-tooling/" class="dropdown-item">CLI Tooling</a>
</li>
            
<li>
    <a href="../../../../v3/reference/mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
<li>
    <a href="../../../../v3/reference/migration/" class="dropdown-item">Migration</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v2 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../v2/" class="dropdown-item">Mezzio: PSR-7 Middleware in Minutes</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../../v2/getting-started/standalone/" class="dropdown-item">Quick Start: Standalone</a>
</li>
            
<li>
    <a href="../../../../v2/getting-started/skeleton/" class="dropdown-item">Quick Start: Skeleton Installer</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/features/middleware-types/" class="dropdown-item">Middleware Types</a>
</li>
            
<li>
    <a href="../../../../v2/features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v2/features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../../v2/features/container/delegator-factories/" class="dropdown-item">Delegator Factories</a>
</li>
            
<li>
    <a href="../../../../v2/features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../../v2/features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../../v2/features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v2/features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../../v2/features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../../v2/features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../../v2/features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../../v2/features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../../v2/features/router/laminas-router/" class="dropdown-item">Using the Laminas Router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v2/features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../../v2/features/template/middleware/" class="dropdown-item">Templated Middleware</a>
</li>
            
<li>
    <a href="../../../../v2/features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../../v2/features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../../v2/features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../../v2/features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
<li>
    <a href="../../../../v2/features/modular-applications/" class="dropdown-item">Modular Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Middleware</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/features/middleware/implicit-methods-middleware/" class="dropdown-item">Implicit HEAD and OPTIONS Middleware</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../../v2/features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../../v2/features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../../v2/features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
            
<li>
    <a href="../../../../v2/features/helpers/content-length/" class="dropdown-item">Content-Length Middleware</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../../v2/features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">Autowiring routes and pipeline middleware</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">Handling multiple routes in a single class</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
            
<li>
    <a href="../../../../v2/cookbook/passing-data-between-middleware/" class="dropdown-item">Passing data between middleware</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../../../v2/reference/cli-tooling/" class="dropdown-item">CLI Tooling</a>
</li>
            
<li>
    <a href="../../../../v2/reference/usage-examples/" class="dropdown-item">Examples</a>
</li>
            
<li>
    <a href="../../../../v2/reference/mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../v2/reference/migration/" class="dropdown-item">To version 2</a>
</li>
            
<li>
    <a href="../../../../v2/reference/migration-to-v2-2/" class="dropdown-item">To version 2.2</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v1 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../" class="dropdown-item">Mezzio: PSR-7 Middleware in Minutes</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../getting-started/standalone/" class="dropdown-item">Quick Start: Standalone</a>
</li>
            
<li>
    <a href="../../../getting-started/skeleton/" class="dropdown-item">Quick Start: Skeleton Installer</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../features/router/laminas-router/" class="dropdown-item">Using the Laminas Router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../features/template/middleware/" class="dropdown-item">Templated Middleware</a>
</li>
            
<li>
    <a href="../../../features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../cookbook/custom-404-page-handling/" class="dropdown-item">Setting custom 404 page handling</a>
</li>
            
<li>
    <a href="../../../cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
            
<li>
    <a href="../../../cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../cookbook/modular-layout/" class="dropdown-item">Building modular applications</a>
</li>
            
<li>
    <a href="../../../cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">Handling multiple routes in a single class</a>
</li>
            
<li>
    <a href="../../../cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../usage-examples/" class="dropdown-item">Examples</a>
</li>
            
<li>
    <a href="../../mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active">From RC5 and Earlier</a>
</li>
            
<li>
    <a href="../to-v1-1/" class="dropdown-item">To Mezzio 1.1</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">_hidden-legacy-page-links <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../getting-started/features/" class="dropdown-item">_getting_started_overview</a>
</li>
                                    
<li>
    <a href="../../../../getting-started/standalone/" class="dropdown-item">_getting_started_standalone</a>
</li>
                                    
<li>
    <a href="../../../../getting-started/skeleton/" class="dropdown-item">_getting_started_skeleton</a>
</li>
                                    
<li>
    <a href="../../../../features/middleware-types/" class="dropdown-item">_features_middleware_types</a>
</li>
                                    
<li>
    <a href="../../../../features/application/" class="dropdown-item">_features_application</a>
</li>
                                    
<li>
    <a href="../../../../features/container/intro/" class="dropdown-item">_features_container_intro</a>
</li>
                                    
<li>
    <a href="../../../../features/container/factories/" class="dropdown-item">_features_container_factories</a>
</li>
                                    
<li>
    <a href="../../../../features/container/delegator-factories/" class="dropdown-item">_features_container_delegator_factories</a>
</li>
                                    
<li>
    <a href="../../../../features/container/laminas-servicemanager/" class="dropdown-item">_features_container_using_laminas-servicemanager</a>
</li>
                                    
<li>
    <a href="../../../../features/container/pimple/" class="dropdown-item">_features_container_using_pimple</a>
</li>
                                    
<li>
    <a href="../../../../features/container/aura-di/" class="dropdown-item">_features_container_using_aura.di</a>
</li>
                                    
<li>
    <a href="../../../../features/router/intro/" class="dropdown-item">_features_router_introduction</a>
</li>
                                    
<li>
    <a href="../../../../features/router/interface/" class="dropdown-item">_features_router_interface</a>
</li>
                                    
<li>
    <a href="../../../../features/router/uri-generation/" class="dropdown-item">_features_router_uri_generation</a>
</li>
                                    
<li>
    <a href="../../../../features/router/piping/" class="dropdown-item">_features_router_piping</a>
</li>
                                    
<li>
    <a href="../../../../features/router/aura/" class="dropdown-item">_features_router_using_aura</a>
</li>
                                    
<li>
    <a href="../../../../features/router/fast-route/" class="dropdown-item">_features_router_using_fastroute</a>
</li>
                                    
<li>
    <a href="../../../../features/router/laminas-router/" class="dropdown-item">_features_router_using_the Laminas Router</a>
</li>
                                    
<li>
    <a href="../../../../features/template/intro/" class="dropdown-item">_features_template_intro</a>
</li>
                                    
<li>
    <a href="../../../../features/template/interface/" class="dropdown-item">_features_template_interface</a>
</li>
                                    
<li>
    <a href="../../../../features/template/middleware/" class="dropdown-item">_features_template_middleware</a>
</li>
                                    
<li>
    <a href="../../../../features/template/plates/" class="dropdown-item">_features_template_plates</a>
</li>
                                    
<li>
    <a href="../../../../features/template/twig/" class="dropdown-item">_features_template_twig</a>
</li>
                                    
<li>
    <a href="../../../../features/template/laminas-view/" class="dropdown-item">_features_template_laminas-view</a>
</li>
                                    
<li>
    <a href="../../../../features/error-handling/" class="dropdown-item">_features_error_handling</a>
</li>
                                    
<li>
    <a href="../../../../features/modular-applications/" class="dropdown-item">_features_modular_applications</a>
</li>
                                    
<li>
    <a href="../../../../features/middleware/implicit-methods-middleware/" class="dropdown-item">_features_middleware_implicit_head_and_options_middleware</a>
</li>
                                    
<li>
    <a href="../../../../features/helpers/intro/" class="dropdown-item">_features_helpers_intro</a>
</li>
                                    
<li>
    <a href="../../../../features/helpers/url-helper/" class="dropdown-item">_features_helpers_urlhelper</a>
</li>
                                    
<li>
    <a href="../../../../features/helpers/server-url-helper/" class="dropdown-item">_features_helpers_serverurlhelper</a>
</li>
                                    
<li>
    <a href="../../../../features/helpers/body-parse/" class="dropdown-item">_features_helpers_body_parsing_middleware</a>
</li>
                                    
<li>
    <a href="../../../../features/helpers/content-length/" class="dropdown-item">_features_helpers_content_length_middleware</a>
</li>
                                    
<li>
    <a href="../../../../features/emitters/" class="dropdown-item">_features_emitters</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">_cookbook_autowiring_routes_and_pipeline_middleware</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/common-prefix-for-routes/" class="dropdown-item">_cookbook_prepending_a_common_path_to_all_routes</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/route-specific-pipeline/" class="dropdown-item">_cookbook_route-specific_middleware_pipelines</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/custom-404-page-handling/" class="dropdown-item">_cookbook_setting_custom_404_page_handling</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/using-custom-view-helpers/" class="dropdown-item">_cookbook_registering_custom_view_helpers_when_using_laminas-view</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/using-laminas-form-view-helpers/" class="dropdown-item">_cookbook_using_laminas-form_view_helpers</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/using-a-base-path/" class="dropdown-item">_cookbook_using_Mezzio_from_a_subdirectory</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/modular-layout/" class="dropdown-item">_cookbook_building_modular_applications</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">_cookbook_setting_a_locale_based_on_a_routing_parameter</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">_cookbook_setting_a_locale_without_a_routing_parameter</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/debug-toolbars/" class="dropdown-item">_cookbook_enabling_debug_toolbars</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">_cookbook_handling_multiple_routes_in_a_single_class</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/flash-messengers/" class="dropdown-item">_cookbook_flash_messengers</a>
</li>
                                    
<li>
    <a href="../../../../cookbook/passing-data-between-middleware/" class="dropdown-item">_cookbook_passing_data_between_middleware</a>
</li>
                                    
<li>
    <a href="../../../../why-mezzio/" class="dropdown-item">_reference_why_mezzio?</a>
</li>
                                    
<li>
    <a href="../../../../reference/cli-tooling/" class="dropdown-item">_reference_cli_tooling</a>
</li>
                                    
<li>
    <a href="../../../../reference/usage-examples/" class="dropdown-item">_reference_usage_examples</a>
</li>
                                    
<li>
    <a href="../../../../reference/mezzio-projects/" class="dropdown-item">_reference_mezzio_Projects</a>
</li>
                                    
<li>
    <a href="../../../../reference/migration/to-v2/" class="dropdown-item">_migration_to_v2</a>
</li>
                                    
<li>
    <a href="../../../../reference/migration/rc-to-v1/" class="dropdown-item">_migration_from_rc5_and_earlier</a>
</li>
                                    
<li>
    <a href="../../../../reference/migration/to-v1-1/" class="dropdown-item">_migration_to_mezzio_1.1</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../mezzio-projects/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../to-v1-1/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/mezzio/mezzio/edit/master/docs/v1/reference/migration/rc-to-v1.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#migration-from-rc5-or-earlier" class="nav-link">Migration from RC5 or earlier</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#routing-and-dispatch-middleware" class="nav-link">Routing and Dispatch middleware</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#applicationfactory-configuration-changes" class="nav-link">ApplicationFactory configuration changes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#route-result-observer-deprecation" class="nav-link">Route result observer deprecation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#timeline-for-migration" class="nav-link">Timeline for migration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="migration-from-rc5-or-earlier">Migration from RC5 or earlier</h1>
<p>RC6 introduced changes to the following:</p>
<ul>
<li>The routing middleware was split into separate middleware, one for routing,
  and one for dispatching.</li>
<li>Due to the above change, we decided to remove auto-registration of routing
  middleware.</li>
<li>The above change also suggested an alternative to the middleware pipeline
  configuration that simplifies it.</li>
<li>Route result observers are deprecated, and no longer triggered for routing
  failures.</li>
<li>Middleware configuration specifications now accept a <code>priority</code> key to
  guarantee the order of items. If you have defined your middleware pipeline in
  multiple files that are then merged, you will need to defined these keys to
  ensure order.</li>
</ul>
<h2 id="routing-and-dispatch-middleware">Routing and Dispatch middleware</h2>
<p>Prior to RC6, the routing middleware:</p>
<ul>
<li>performed routing</li>
<li>notified route result observers</li>
<li>created a new request that composed the matched routing parameters as request
  attributes, and composed the route result instance itself as a request
  attribute.</li>
<li>marshaled the middleware matched by routing</li>
<li>dispatched the marshaled middleware</li>
</ul>
<p>To provide a better separation of concerns, we split the routing middleware into
two distinct methods: <code>routingMiddleware()</code> and <code>dispatchMiddleware()</code>.</p>
<p><code>routingMiddleware()</code> performs the following duties:</p>
<ul>
<li>routing; and</li>
<li>creating a new request that composes the matched routing parameters as request
  attributes, and composes the route result instance itself as a request
  attribute.</li>
</ul>
<p><code>dispatchMiddleware()</code> performs the following duties:</p>
<ul>
<li>marshaling the middleware specified in the route result; and</li>
<li>dispatching the marshaled middleware.</li>
</ul>
<p>One reason for this split is to allow injecting middleware to operate between
routing and dispatch. As an example, you could have middleware that determines
if a matched route requires an authenticated identity:</p>
<pre><code class="php">public function __invoke($request, $response, $next)
{
    $result = $request-&gt;getAttribute(RouteResult::class);
    if (! in_array($result-&gt;getMatchedRouteName(), $this-&gt;authRequired)) {
        return $next($request, $response);
    }

    if (! $this-&gt;authenticated) {
        return $next($request, $response-&gt;withStatus(401), 'authentication
        required');
    }
}
</code></pre>

<p>The above could then be piped between the routing and dispatch middleware:</p>
<pre><code class="php">$app-&gt;pipeRoutingMiddleware();
$app-&gt;pipe(AuthenticationMiddleware::class);
$app-&gt;pipeDispatchMiddleware();
</code></pre>

<p>Since the routing middleware has been split, we determined we could no longer
automatically pipe the routing middleware; detection would require detecting
both sets of middleware, and ensuring they are in the correct order.
Additionally, since one goal of splitting the middleware is to allow
<em>substitutions</em> for these responsibilities, auto-injection could in some cases
be undesired. As a result, we now require you to inject each manually.</p>
<h3 id="impact">Impact</h3>
<p>This change will require changes in your application.</p>
<ol>
<li>If you are using Mezzio programmatically (i.e., you are not using
   a container and the <code>Mezzio\Container\ApplicationFactory</code>),
   you are now <em>required</em> to call <code>Application::pipeRoutingMiddleware()</code>.
   Additionally, a new method, <code>Application::pipeDispatchMiddleware()</code> exists
   for injecting the application with the dispatch middleware, this, too, must
   be called.</li>
</ol>
<p>This has a fortunate side effect: registering routed middleware no longer
   affects the middleware pipeline order. As such, you can register your
   pipeline first or last prior to running the application. The only stipulation
   is that <em>unless you register the routing <strong>and</strong> dispatch middleware, your routed
   middleware will not be executed!</em> As such, the following two lines <strong>must</strong>
   be added to your application prior to calling <code>Application::run()</code>:</p>
<pre><code class="php">$app-&gt;pipeRoutingMiddleware();
$app-&gt;pipeDispatchMiddleware();
</code></pre>

<ol>
<li>If you are creating your <code>Application</code> instance using a container and the
   <code>Mezzio\Container\ApplicationFactory</code>, you will need to update your
   configuration to list the routing and dispatch middleware. The next section
   details the configuration changes necessary.</li>
</ol>
<h2 id="applicationfactory-configuration-changes">ApplicationFactory configuration changes</h2>
<p>As noted in the document summary, the middleware pipeline configuration was
changed starting in RC6.  The changes are done in such a way as to honor
configuration from RC5 and earlier, but using such configuration will now prompt
you to update your application.</p>
<p>RC5 and earlier defined the default <code>middleware_pipeline</code> configuration as follows:</p>
<pre><code class="php">return [
    'middleware_pipeline' =&gt; [
        // An array of middleware to register prior to registration of the
        // routing middleware
        'pre_routing' =&gt; [
            //[
            // Required:
            //    'middleware' =&gt; 'Name or array of names of middleware services and/or callables',
            // Optional:
            //    'path'  =&gt; '/path/to/match',
            //    'error' =&gt; true,
            //],
            [
                'middleware' =&gt; [
                    Helper\ServerUrlMiddleware::class,
                    Helper\UrlHelperMiddleware::class,
                ],
            ],
        ],

        // An array of middleware to register after registration of the
        // routing middleware
        'post_routing' =&gt; [
            //[
            // Required:
            //    'middleware' =&gt; 'Name of middleware service, or a callable',
            // Optional:
            //    'path'  =&gt; '/path/to/match',
            //    'error' =&gt; true,
            //],
        ],
    ],
];
</code></pre>

<p>The following changes have been made:</p>
<ul>
<li>The concept of <code>pre_routing</code> and <code>post_routing</code> have been deprecated, and will
  be removed starting with the 1.1 version. A single middleware pipeline is now
  provided, though <em>any individual specification can also specify an array of
  middleware</em>.</li>
<li><strong>The routing and dispatch middleware must now be added to your configuration
  for them to be added to your application.</strong></li>
<li>Middleware specifications can now optionally provide a <code>priority</code> key, with 1
  being the default. High integer priority indicates earlier execution, while
  low/negative integer priority indicates later execution. Items with the same
  priority are executed in the order they are registered. Priority is now how
  you can indicate the order in which middleware should execute.</li>
</ul>
<h3 id="impact_1">Impact</h3>
<p>While the configuration from RC5 and earlier will continue to work, it will
raise deprecation notices. As such, you will need to update your configuration
to follow the guidelines created with RC6.</p>
<p>RC6 and later change the configuration to remove the <code>pre_routing</code> and
<code>post_routing</code> keys. However, individual items within the array retain the same
format as middleware inside those keys, with the addition of a new key,
<code>priority</code>:</p>
<pre><code class="php">[
    // Required:
    'middleware' =&gt; 'Name of middleware service, or a callable',
    // Optional:
    //    'path'  =&gt; '/path/to/match',
    //    'error' =&gt; true,
    //    'priority' =&gt; 1, // integer
]
</code></pre>

<p>The <code>priority</code> key is used to determine the order in which middleware is piped
to the application. Higher integer values are piped earlier, while
lower/negative integer values are piped later; middleware with the same priority
are piped in the order in which they are discovered in the pipeline. The default
priority used is 1.</p>
<p>Additionally, the routing and dispatch middleware now become items in the array;
they (or equivalent entries for your own implementations) must be present in
your configuration if you want your routed middleware to dispatch!  This change
gives you full control over the flow of the pipeline.</p>
<p>To specify the routing middleware, use the constant
<code>Mezzio\Container\ApplicationFactory::ROUTING_MIDDLEWARE</code> in place of
a middleware array; this has the value <code>EXPRESSIVE_ROUTING_MIDDLEWARE</code>, if you
do not want to import the class. Similarly, for the dispatch middleware, use the
constant <code>Mezzio\Container\ApplicationFactory::DISPATCH_MIDDLEWARE</code>
(value <code>EXPRESSIVE_DISPATCH_MIDDLEWARE</code>) to specify the dispatch middleware.</p>
<p>As such, the default configuration now becomes:</p>
<pre><code class="php">return [
    'middleware_pipeline' =&gt; [
        // An array of middleware to pipe to the application.
        // Each item is of the following structure:
        // [
        //     // Required:
        //     'middleware' =&gt; 'Name or array of names of middleware services and/or callables',
        //     // Optional:
        //     'path'  =&gt; '/path/to/match',
        //     'error' =&gt; true,
        // ],
        [
            'middleware' =&gt; [
                Helper\ServerUrlMiddleware::class,
            ],
            'priority' =&gt; PHP_INT_MAX,
        ],

        // The following is an entry for:
        // - routing middleware
        // - middleware that reacts to the routing results
        // - dispatch middleware
        [
            'middleware' =&gt; [
                Mezzio\Container\ApplicationFactory::ROUTING_MIDDLEWARE,
                Helper\UrlHelperMiddleware::class,
                Mezzio\Container\ApplicationFactory::DISPATCH_MIDDLEWARE,
            ],
            'priority' =&gt; 1,
        ],

        // The following is an entry for the dispatch middleware:

        // Place error handling middleware after the routing and dispatch
        // middleware, with negative priority.
        // [
        //     'middleware' =&gt; [
        //     ],
        //     'priority' =&gt; -1000,
        // ],
    ],
];
</code></pre>

<p>To update an existing application:</p>
<ul>
<li>Promote all <code>pre_routing</code> middleware up a level, and remove the <code>pre_routing</code>
  key. Provide a <code>priority</code> value greater than 1. We recommend having a single
  middleware specification with an array of middleware that represents the "pre
  routing" middleware.</li>
<li>Add the entries for <code>Mezzio\Container\ApplicationFactory::ROUTING_MIDDLEWARE</code>
  and <code>Mezzio\Container\ApplicationFactory::DISPATCH_MIDDLEWARE</code>
  immediately following any <code>pre_routing</code> middleware, and before any
  <code>post_routing</code> middleware; we recommend grouping it per the above example.</li>
<li>Promote all <code>post_routing</code> middleware up a level, and remove the
  <code>post_routing</code> key. Provide a <code>priority</code> value less than 1 or negative.</li>
<li><strong>If you have <code>middleware_pipeline</code> specifications in multiple files</strong>, you
  will need to specify <code>priority</code> keys for all middleware in order to guarantee
  order after merging. We recommend having a single middleware specification
  with an array of middleware that represents the "post routing" middleware.</li>
</ul>
<p>As an example, consider the following application configuration:</p>
<pre><code class="php">return [
    'middleware_pipeline' =&gt; [
        'pre_routing' =&gt; [
            [
                'middleware' =&gt; [
                    Mezzio\Helper\ServerUrlMiddleware::class,
                    Mezzio\Helper\UrlHelperMiddleware::class,
                ],
            ],
            [ 'middleware' =&gt; DebugToolbarMiddleware::class ],
            [
                'middleware' =&gt; ApiMiddleware::class,
                'path' =&gt; '/api',
            ],
        ],

        'post_routing' =&gt; [
            ['middleware' =&gt; NotFoundMiddleware::class, 'error' =&gt; true],
        ],
    ],
];
</code></pre>

<p>This would be rewritten to the following to work with RC6 and later:</p>
<pre><code class="php">return [
    'middleware_pipeline' =&gt; [
        'always' =&gt; [
            'middleware' =&gt; [
                Mezzio\Helper\ServerUrlMiddleware::class,
                DebugToolbarMiddleware::class,
            ],
            'priority' =&gt; PHP_INT_MAX,
        ],
        'api' =&gt; [
            'middleware' =&gt; ApiMiddleware::class,
            'path' =&gt; '/api',
            'priority' =&gt; 100,
        ],

        'routing' =&gt; [
            'middleware' =&gt; [
                Mezzio\Container\ApplicationFactory::ROUTING_MIDDLEWARE,
                Mezzio\Helper\UrlHelperMiddleware::class,
                Mezzio\Container\ApplicationFactory::DISPATCH_MIDDLEWARE,
            ],
            'priority' =&gt; 1,
        ],

        'error' =&gt; [
            'middleware' =&gt; [
                NotFoundMiddleware::class,
            ],
            'error' =&gt; true,
            'priority' =&gt; -1000,
        ],
    ],
];
</code></pre>

<p>Note in the above example the various groupings. By grouping middleware by
priority, you can simplify adding new middleware, particularly if you know it
should execute before routing, or as error middleware, or between routing and
dispatch.</p>
<blockquote>
<h4 id="keys-are-ignored">Keys are ignored</h4>
<p>The above example provides keys for each middleware specification. The factory
will ignore these, but they can be useful for cases when you might want to
specify configuration in multiple files, and merge specific entries together.
Be aware, however, that the <code>middleware</code> key itself is an indexed array;
items will be appended based on the order in which configuration files are
merged. If order of these is important, create separate specifications with
relevant <code>priority</code> values.</p>
</blockquote>
<h2 id="route-result-observer-deprecation">Route result observer deprecation</h2>
<p>As of RC6, the following changes have occurred with regards to route result
observers:</p>
<ul>
<li>They are deprecated for usage with <code>Mezzio\Application</code>, and that
  class will not be a route result subject starting in 1.1. You will need to
  start migrating to alternative solutions.</li>
<li>The functionality for notifying observers has been moved from the routing
  middleware into a dedicated <code>Application::routeResultObserverMiddleware()</code>
  method. This middleware must be piped separately to the middleware pipeline
  for it to trigger.</li>
</ul>
<h3 id="impact_2">Impact</h3>
<p>If you are using any route result observers, you will need to ensure your
application notifies them, and you will want to migrate to alternative solutions
to ensure your functionality continues to work.</p>
<p>To ensure your observers are triggered, you will need to adapt your application,
based on how you create your instance.</p>
<p>If you are <em>not</em> using the <code>ApplicationFactory</code>, you will need to pipe the
<code>routeResultObserverMiddleware</code> to your application, between the routing and
dispatch middleware:</p>
<pre><code class="php">$app-&gt;pipeRoutingMiddleware();
$app-&gt;pipeRouteResultObserverMiddleware();
$app-&gt;pipeDispatchMiddleware();
</code></pre>

<p>If you are using the <code>ApplicationFactory</code>, you may need to update your
configuration to allow injecting the route result observer middleware. If you
have <em>not</em> updated your configuration to remove the <code>pre_routing</code> and/or
<code>post_routing</code> keys, the middleware <em>will</em> be registered for you. If you have,
however, you will need to register it following the routing middleware:</p>
<pre><code class="php">[
    'middleware_pipeline' =&gt; [
        /* ... */
        'routing' =&gt; [
            'middleware' =&gt; [
                Mezzio\Container\ApplicationFactory::ROUTING_MIDDLEWARE,
                Mezzio\Container\ApplicationFactory::ROUTE_RESULT_OBSERVER_MIDDLEWARE,
                Mezzio\Container\ApplicationFactory::DISPATCH_MIDDLEWARE,
            ],
            'priority' =&gt; 1,
        ],
        /* ... */
    ],
]
</code></pre>

<p>To make your observers forwards-compatible requires two changes:</p>
<ul>
<li>Rewriting your observer as middleware.</li>
<li>Registering your observer as middleware following the routing middleware.</li>
</ul>
<p>If your observer looked like the following:</p>
<pre><code class="php">use Mezzio\Router\RouteResult;
use Mezzio\Router\RouteResultObserverInterface;

class MyObserver implements RouteResultObserverInterface
{
    private $logger;

    public function __construct(Logger $logger)
    {
        $this-&gt;logger = $logger;
    }

    public function update(RouteResult $result)
    {
        $this-&gt;logger-&gt;log($result);
    }
}
</code></pre>

<p>You could rewrite it as follows:</p>
<pre><code class="php">use Mezzio\Router\RouteResult;

class MyObserver
{
    private $logger;

    public function __construct(Logger $logger)
    {
        $this-&gt;logger = $logger;
    }

    public function __invoke($request, $response, $next)
    {
        $result = $request-&gt;getAttribute(RouteResult::class, false);
        if (! $result) {
            return $next($request, $response);
        }

        $this-&gt;logger-&gt;log($result);
        return $next($request, $response);
    }
}
</code></pre>

<p>You would then register it following the routing middleware. If you are building
your application programmatically, you would do this as follows:</p>
<pre><code class="php">$app-&gt;pipeRoutingMiddleware();
$app-&gt;pipe(MyObserver::class);
$app-&gt;pipeDispatchMiddleware();
</code></pre>

<p>If you are using the <code>ApplicationFactory</code>, alter your configuration:</p>
<pre><code class="php">[
    'middleware_pipeline' =&gt; [
        /* ... */
        'routing' =&gt; [
            'middleware' =&gt; [
                Mezzio\Container\ApplicationFactory::ROUTING_MIDDLEWARE,
                MyObserver::class,
                Mezzio\Container\ApplicationFactory::DISPATCH_MIDDLEWARE,
            ],
            'priority' =&gt; 1,
        ],
        /* ... */
    ],
]
</code></pre>

<h2 id="timeline-for-migration">Timeline for migration</h2>
<p>The following features will be removed in version 1.1.0:</p>
<ul>
<li>Support for the <code>pre_routing</code> and <code>post_routing</code> configuration.</li>
<li>Support for route result observers.</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <div class="table-responsive"><table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
