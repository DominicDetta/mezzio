<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Examples - mezzio</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../../css/mezzio.css" rel="stylesheet">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">mezzio</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v3 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../v3/" class="dropdown-item">Introduction</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../v3/getting-started/quick-start/" class="dropdown-item">Quick Start</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/features/middleware-types/" class="dropdown-item">Middleware Types</a>
</li>
            
<li>
    <a href="../../../v3/features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v3/features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../v3/features/container/delegator-factories/" class="dropdown-item">Delegator Factories</a>
</li>
            
<li>
    <a href="../../../v3/features/container/middleware-container/" class="dropdown-item">The Middleware Container</a>
</li>
            
<li>
    <a href="../../../v3/features/container/middleware-factory/" class="dropdown-item">The Middleware Factory</a>
</li>
            
<li>
    <a href="../../../v3/features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../v3/features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../v3/features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
            
<li>
    <a href="../../../v3/features/container/config/" class="dropdown-item">Container configuration</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v3/features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../v3/features/router/route-collector/" class="dropdown-item">The Route Collector</a>
</li>
            
<li>
    <a href="../../../v3/features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../v3/features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../v3/features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../v3/features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../v3/features/router/laminas-router/" class="dropdown-item">Using laminas-router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v3/features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../v3/features/template/request-handlers/" class="dropdown-item">Templated Request Handlers</a>
</li>
            
<li>
    <a href="../../../v3/features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../v3/features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../v3/features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v3/features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
<li>
    <a href="../../../v3/features/modular-applications/" class="dropdown-item">Modular Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Middleware</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/features/middleware/routing-and-dispatch-middleware/" class="dropdown-item">Routing and Dispatch Middleware</a>
</li>
            
<li>
    <a href="../../../v3/features/middleware/implicit-methods-middleware/" class="dropdown-item">Implicit HEAD and OPTIONS Middleware</a>
</li>
            
<li>
    <a href="../../../v3/features/middleware/method-not-allowed-middleware/" class="dropdown-item">Returning Method Not Allowed</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v3/features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../v3/features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../v3/features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
            
<li>
    <a href="../../../v3/features/helpers/content-length/" class="dropdown-item">Content-Length Middleware</a>
</li>
            
<li>
    <a href="../../../v3/features/helpers/template-variable-container/" class="dropdown-item">Template Variable Container</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v3/features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">Autowiring routes and pipeline middleware</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/passing-data-between-middleware/" class="dropdown-item">Passing data between middleware</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/path-segregated-routing/" class="dropdown-item">Path-segregated routing</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/access-common-data-in-templates/" class="dropdown-item">Provide Access to Common Data In Templates</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/host-segregated-middleware/" class="dropdown-item">Segregating middleware by host</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/double-pass-middleware/" class="dropdown-item">Using double-pass middleware</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../v3/cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v3/why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../../v3/reference/cli-tooling/" class="dropdown-item">CLI Tooling</a>
</li>
            
<li>
    <a href="../../../v3/reference/mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
<li>
    <a href="../../../v3/reference/migration/" class="dropdown-item">Migration</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v2 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../" class="dropdown-item">Mezzio: PSR-7 Middleware in Minutes</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../getting-started/standalone/" class="dropdown-item">Quick Start: Standalone</a>
</li>
            
<li>
    <a href="../../getting-started/skeleton/" class="dropdown-item">Quick Start: Skeleton Installer</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/middleware-types/" class="dropdown-item">Middleware Types</a>
</li>
            
<li>
    <a href="../../features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../features/container/delegator-factories/" class="dropdown-item">Delegator Factories</a>
</li>
            
<li>
    <a href="../../features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../features/router/laminas-router/" class="dropdown-item">Using the Laminas Router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../features/template/middleware/" class="dropdown-item">Templated Middleware</a>
</li>
            
<li>
    <a href="../../features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
<li>
    <a href="../../features/modular-applications/" class="dropdown-item">Modular Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Middleware</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/middleware/implicit-methods-middleware/" class="dropdown-item">Implicit HEAD and OPTIONS Middleware</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
            
<li>
    <a href="../../features/helpers/content-length/" class="dropdown-item">Content-Length Middleware</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">Autowiring routes and pipeline middleware</a>
</li>
            
<li>
    <a href="../../cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
            
<li>
    <a href="../../cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">Handling multiple routes in a single class</a>
</li>
            
<li>
    <a href="../../cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
            
<li>
    <a href="../../cookbook/passing-data-between-middleware/" class="dropdown-item">Passing data between middleware</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../cli-tooling/" class="dropdown-item">CLI Tooling</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Examples</a>
</li>
            
<li>
    <a href="../mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../migration/" class="dropdown-item">To version 2</a>
</li>
            
<li>
    <a href="../migration-to-v2-2/" class="dropdown-item">To version 2.2</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v1 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../v1/" class="dropdown-item">Mezzio: PSR-7 Middleware in Minutes</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../v1/getting-started/standalone/" class="dropdown-item">Quick Start: Standalone</a>
</li>
            
<li>
    <a href="../../../v1/getting-started/skeleton/" class="dropdown-item">Quick Start: Skeleton Installer</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../v1/features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../v1/features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../v1/features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../v1/features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../v1/features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../v1/features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../v1/features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../v1/features/router/laminas-router/" class="dropdown-item">Using the Laminas Router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../v1/features/template/middleware/" class="dropdown-item">Templated Middleware</a>
</li>
            
<li>
    <a href="../../../v1/features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../v1/features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../v1/features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v1/features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../v1/features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../v1/features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v1/features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/custom-404-page-handling/" class="dropdown-item">Setting custom 404 page handling</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/modular-layout/" class="dropdown-item">Building modular applications</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">Handling multiple routes in a single class</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../../v1/reference/usage-examples/" class="dropdown-item">Examples</a>
</li>
            
<li>
    <a href="../../../v1/reference/mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/reference/migration/rc-to-v1/" class="dropdown-item">From RC5 and Earlier</a>
</li>
            
<li>
    <a href="../../../v1/reference/migration/to-v1-1/" class="dropdown-item">To Mezzio 1.1</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">_hidden-legacy-page-links <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../getting-started/features/" class="dropdown-item">_getting_started_overview</a>
</li>
                                    
<li>
    <a href="../../../getting-started/standalone/" class="dropdown-item">_getting_started_standalone</a>
</li>
                                    
<li>
    <a href="../../../getting-started/skeleton/" class="dropdown-item">_getting_started_skeleton</a>
</li>
                                    
<li>
    <a href="../../../features/middleware-types/" class="dropdown-item">_features_middleware_types</a>
</li>
                                    
<li>
    <a href="../../../features/application/" class="dropdown-item">_features_application</a>
</li>
                                    
<li>
    <a href="../../../features/container/intro/" class="dropdown-item">_features_container_intro</a>
</li>
                                    
<li>
    <a href="../../../features/container/factories/" class="dropdown-item">_features_container_factories</a>
</li>
                                    
<li>
    <a href="../../../features/container/delegator-factories/" class="dropdown-item">_features_container_delegator_factories</a>
</li>
                                    
<li>
    <a href="../../../features/container/laminas-servicemanager/" class="dropdown-item">_features_container_using_laminas-servicemanager</a>
</li>
                                    
<li>
    <a href="../../../features/container/pimple/" class="dropdown-item">_features_container_using_pimple</a>
</li>
                                    
<li>
    <a href="../../../features/container/aura-di/" class="dropdown-item">_features_container_using_aura.di</a>
</li>
                                    
<li>
    <a href="../../../features/router/intro/" class="dropdown-item">_features_router_introduction</a>
</li>
                                    
<li>
    <a href="../../../features/router/interface/" class="dropdown-item">_features_router_interface</a>
</li>
                                    
<li>
    <a href="../../../features/router/uri-generation/" class="dropdown-item">_features_router_uri_generation</a>
</li>
                                    
<li>
    <a href="../../../features/router/piping/" class="dropdown-item">_features_router_piping</a>
</li>
                                    
<li>
    <a href="../../../features/router/aura/" class="dropdown-item">_features_router_using_aura</a>
</li>
                                    
<li>
    <a href="../../../features/router/fast-route/" class="dropdown-item">_features_router_using_fastroute</a>
</li>
                                    
<li>
    <a href="../../../features/router/laminas-router/" class="dropdown-item">_features_router_using_the Laminas Router</a>
</li>
                                    
<li>
    <a href="../../../features/template/intro/" class="dropdown-item">_features_template_intro</a>
</li>
                                    
<li>
    <a href="../../../features/template/interface/" class="dropdown-item">_features_template_interface</a>
</li>
                                    
<li>
    <a href="../../../features/template/middleware/" class="dropdown-item">_features_template_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/template/plates/" class="dropdown-item">_features_template_plates</a>
</li>
                                    
<li>
    <a href="../../../features/template/twig/" class="dropdown-item">_features_template_twig</a>
</li>
                                    
<li>
    <a href="../../../features/template/laminas-view/" class="dropdown-item">_features_template_laminas-view</a>
</li>
                                    
<li>
    <a href="../../../features/error-handling/" class="dropdown-item">_features_error_handling</a>
</li>
                                    
<li>
    <a href="../../../features/modular-applications/" class="dropdown-item">_features_modular_applications</a>
</li>
                                    
<li>
    <a href="../../../features/middleware/implicit-methods-middleware/" class="dropdown-item">_features_middleware_implicit_head_and_options_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/intro/" class="dropdown-item">_features_helpers_intro</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/url-helper/" class="dropdown-item">_features_helpers_urlhelper</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/server-url-helper/" class="dropdown-item">_features_helpers_serverurlhelper</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/body-parse/" class="dropdown-item">_features_helpers_body_parsing_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/content-length/" class="dropdown-item">_features_helpers_content_length_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/emitters/" class="dropdown-item">_features_emitters</a>
</li>
                                    
<li>
    <a href="../../../cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">_cookbook_autowiring_routes_and_pipeline_middleware</a>
</li>
                                    
<li>
    <a href="../../../cookbook/common-prefix-for-routes/" class="dropdown-item">_cookbook_prepending_a_common_path_to_all_routes</a>
</li>
                                    
<li>
    <a href="../../../cookbook/route-specific-pipeline/" class="dropdown-item">_cookbook_route-specific_middleware_pipelines</a>
</li>
                                    
<li>
    <a href="../../../cookbook/custom-404-page-handling/" class="dropdown-item">_cookbook_setting_custom_404_page_handling</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-custom-view-helpers/" class="dropdown-item">_cookbook_registering_custom_view_helpers_when_using_laminas-view</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-laminas-form-view-helpers/" class="dropdown-item">_cookbook_using_laminas-form_view_helpers</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-a-base-path/" class="dropdown-item">_cookbook_using_Mezzio_from_a_subdirectory</a>
</li>
                                    
<li>
    <a href="../../../cookbook/modular-layout/" class="dropdown-item">_cookbook_building_modular_applications</a>
</li>
                                    
<li>
    <a href="../../../cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">_cookbook_setting_a_locale_based_on_a_routing_parameter</a>
</li>
                                    
<li>
    <a href="../../../cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">_cookbook_setting_a_locale_without_a_routing_parameter</a>
</li>
                                    
<li>
    <a href="../../../cookbook/debug-toolbars/" class="dropdown-item">_cookbook_enabling_debug_toolbars</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">_cookbook_handling_multiple_routes_in_a_single_class</a>
</li>
                                    
<li>
    <a href="../../../cookbook/flash-messengers/" class="dropdown-item">_cookbook_flash_messengers</a>
</li>
                                    
<li>
    <a href="../../../cookbook/passing-data-between-middleware/" class="dropdown-item">_cookbook_passing_data_between_middleware</a>
</li>
                                    
<li>
    <a href="../../../why-mezzio/" class="dropdown-item">_reference_why_mezzio?</a>
</li>
                                    
<li>
    <a href="../../../reference/cli-tooling/" class="dropdown-item">_reference_cli_tooling</a>
</li>
                                    
<li>
    <a href="../../../reference/usage-examples/" class="dropdown-item">_reference_usage_examples</a>
</li>
                                    
<li>
    <a href="../../../reference/mezzio-projects/" class="dropdown-item">_reference_mezzio_Projects</a>
</li>
                                    
<li>
    <a href="../../../reference/migration/to-v2/" class="dropdown-item">_migration_to_v2</a>
</li>
                                    
<li>
    <a href="../../../reference/migration/rc-to-v1/" class="dropdown-item">_migration_from_rc5_and_earlier</a>
</li>
                                    
<li>
    <a href="../../../reference/migration/to-v1-1/" class="dropdown-item">_migration_to_mezzio_1.1</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../cli-tooling/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../mezzio-projects/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/mezzio/mezzio/edit/master/docs/v2/reference/usage-examples.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#usage-examples" class="nav-link">Usage Examples</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#hello-world-using-a-container" class="nav-link">Hello World using a Container</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#hello-world-using-a-configuration-driven-container" class="nav-link">Hello World using a Configuration-Driven Container</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#hybrid-container-and-programmatic-creation" class="nav-link">Hybrid Container and Programmatic Creation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#segregating-your-application-to-a-subpath" class="nav-link">Segregating your application to a subpath</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="usage-examples">Usage Examples</h1>
<p>Below are several usage examples, covering a variety of ways of creating and
managing an application.</p>
<p>In all examples, the assumption is the following directory structure:</p>
<pre><code>.
├── config
├── data
├── composer.json
├── public
│   └── index.php
├── src
└── vendor
</code></pre>

<p>We assume also that:</p>
<ul>
<li>You have installed mezzio per the <a href="../../..#installation">installation instructions</a>.</li>
<li><code>public/</code> will be the document root of your application.</li>
<li>Your own classes are under <code>src/</code> with the top-level namespace <code>App</code>,
  and you have configured <a href="https://getcomposer.org/doc/01-basic-usage.md#autoloading">autoloading</a>
  in your <code>composer.json</code> for those classes (this should be done for you during
  installation).</li>
</ul>
<blockquote>
<h3 id="using-the-built-in-web-server">Using the built-in web server</h3>
<p>You can use the built-in web server to run the examples. Run:</p>
<p><code>bash
$ php -S 0.0.0.0:8080 -t public</code></p>
<p>from the application root to start up a web server running on port 8080, and
then browse to http://localhost:8080/. If you used the Mezzio installer,
the following is equivalent:</p>
<p><code>bash
$ composer run --timeout=0 serve</code></p>
<h3 id="setting-up-autoloading-for-the-application-namespace">Setting up autoloading for the Application namespace</h3>
<p>In your <code>composer.json</code> file, place the following:</p>
<p><code>json
"autoload": {
    "psr-4": {
        "Application\\": "src/"
    }
},</code></p>
<p>Once done, run:</p>
<p><code>bash
$ composer dump-autoload</code></p>
</blockquote>
<h3 id="routing">Routing</h3>
<p>As noted in the <a href="../../features/application/#adding-routable-middleware">Application documentation</a>,
routing is abstracted and can be accomplished by calling any of the following
methods:</p>
<ul>
<li><code>route($path, $middleware, array $methods = null, $name = null)</code> to route to a
  path and match any HTTP method, multiple HTTP methods, or custom HTTP methods.</li>
<li><code>get($path, $middleware, $name = null)</code> to route to a path that will only
  respond to the GET HTTP method.</li>
<li><code>post($path, $middleware, $name = null)</code> to route to a path that will only
  respond to the POST HTTP method.</li>
<li><code>put($path, $middleware, $name = null)</code> to route to a path that will only
  respond to the PUT HTTP method.</li>
<li><code>patch($path, $middleware, $name = null)</code> to route to a path that will only
  respond to the PATCH HTTP method.</li>
<li><code>delete($path, $middleware, $name = null)</code> to route to a path that will only
  respond to the DELETE HTTP method.</li>
</ul>
<p>All methods return a <code>Mezzio\Router\Route</code> method, which allows you to
specify additional options to associate with the route (e.g., for specifying
criteria, default values to match, etc.).</p>
<p>As examples:</p>
<pre><code class="php">// GET
// This demonstrates passing a middleware instance (assuming $helloWorld is
// valid middleware)
$app-&gt;get('/', $helloWorld);

// POST
// This example specifies the middleware as a service name instead of as
// actual executable middleware.
$app-&gt;post('/trackback', 'TrackBack');

// PUT
// This example shows operating on the returned route. In this case, it's adding
// regex tokens to restrict what values for {id} will match. (The tokens feature
// is specific to Aura.Router.)
$app-&gt;put('/post/{id}', 'ReplacePost')
    -&gt;setOptions([
        'tokens' =&gt; ['id' =&gt; '\d+'],
    ]);

// PATCH
// This example builds on the one above. Mezzio allows you to specify
// the same path for a route matching on a different HTTP method, and
// corresponding to different middleware.
$app-&gt;patch('/post/{id}', 'UpdatePost')
    -&gt;setOptions([
        'tokens' =&gt; ['id' =&gt; '\d+'],
    ]);

// DELETE
$app-&gt;delete('/post/{id}', 'DeletePost')
    -&gt;setOptions([
        'tokens' =&gt; ['id' =&gt; '\d+'],
    ]);

// Matching ALL HTTP methods
// If the underlying router supports matching any HTTP method, the following
// will do so. Note: FastRoute *requires* you to specify the HTTP methods
// allowed explicitly, and does not support wildcard routes. As such, the
// following example maps to the combination of HEAD, OPTIONS, GET, POST, PATCH,
// PUT, TRACE, and DELETE.
// Just like the previous examples, it returns a Route instance that you can
// further manipulate.
$app-&gt;route('/post/{id}', 'HandlePost')
    -&gt;setOptions([
        'tokens' =&gt; ['id' =&gt; '\d+'],
    ]);

// Matching multiple HTTP methods
// You can pass an array of HTTP methods as a third argument to route(); in such
// cases, routing will match if any of the specified HTTP methods are provided.
$app-&gt;route('/post', 'HandlePostCollection', ['GET', 'POST']);

// Matching NO HTTP methods
// Pass an empty array to the HTTP methods. HEAD and OPTIONS will still be
// honored. (In FastRoute, GET is also honored.)
$app-&gt;route('/post', 'WillThisHandlePost', []);
</code></pre>

<p>Finally, if desired, you can create a <code>Mezzio\Router\Route</code> instance
manually and pass it to <code>route()</code> as the sole argument:</p>
<pre><code class="php">$route = new Route('/post', 'HandlePost', ['GET', 'POST']);
$route-&gt;setOptions($options);

$app-&gt;route($route);
</code></pre>

<h2 id="hello-world-using-a-container">Hello World using a Container</h2>
<p>Mezzio works with <a href="https://www.php-fig.org/psr/psr-11/">PSR-11 Containers</a>,
though it's an optional feature. By default, if you use the <code>AppFactory</code>, it
will use <a href="https://docs.laminas.dev/laminas-servicemanager/">laminas-servicemanager</a>
so long as that package is installed.</p>
<p>In the following example, we'll populate the container with our middleware, and
the application will pull it from there when matched.</p>
<p>Edit your <code>public/index.php</code> to read as follows:</p>
<pre><code class="php">use Interop\Http\ServerMiddleware\DelegateInterface;
use Laminas\Diactoros\Response\JsonResponse;
use Laminas\Diactoros\Response\TextResponse;
use Mezzio\AppFactory;
use Laminas\ServiceManager\ServiceManager;

require __DIR__ . '/../vendor/autoload.php';

$container = new ServiceManager();

$container-&gt;setFactory('HelloWorld', function ($container) {
    return function ($request, DelegateInterface $delegate) {
        return new TextResponse('Hello, world!');
    };
});

$container-&gt;setFactory('Ping', function ($container) {
    return function ($request, DelegateInterface $delegate) {
        return new JsonResponse(['ack' =&gt; time()]);
    };
});

$app = AppFactory::create($container);
$app-&gt;get('/', 'HelloWorld');
$app-&gt;get('/ping', 'Ping');

$app-&gt;pipeRoutingMiddleware();
$app-&gt;pipeDispatchMiddleware();

$app-&gt;run();
</code></pre>

<p>In the example above, we pass our container to <code>AppFactory</code>. We could have also
done this instead:</p>
<pre><code class="php">$app = AppFactory::create();
$container = $app-&gt;getContainer();
</code></pre>

<p>and then added our service definitions. We recommend passing the container to
the factory instead; if we ever change which container we use by default, your
code might not work!</p>
<p>The following two lines are the ones of interest:</p>
<pre><code class="php">$app-&gt;get('/', 'HelloWorld');
$app-&gt;get('/ping', 'Ping');
</code></pre>

<p>These map the two paths to <em>service names</em> instead of callables. When routing
matches a path, it does the following:</p>
<ul>
<li>If the middleware provided when defining the route is callable, it uses it
  directly.</li>
<li>If the middleware is a valid service name in the container, it pulls it from
  the container. <em>This is what happens in this example.</em></li>
<li>Finally, if no container is available, or the service name is not found in the
  container, it checks to see if it's a valid class name; if so, it instantiates
  and returns the class instance.</li>
</ul>
<p>If you fire up your web server, you'll find that the <code>/</code> and <code>/ping</code> paths
continue to work.</p>
<p>One other approach you could take would be to define the application itself in
the container, and then pull it from there:</p>
<pre><code class="php">$container-&gt;setFactory('Mezzio\Application', function ($container) {
    $app = AppFactory::create($container);
    $app-&gt;get('/', 'HelloWorld');
    $app-&gt;get('/ping', 'Ping');
    return $app;
});

$app = $container-&gt;get('Mezzio\Application');
$app-&gt;run();
</code></pre>

<p>This is a nice way to encapsulate the application creation. You could then
potentially move all service configuration to another file! (We already
<a href="../../features/container/factories/#applicationfactory">document an ApplicationFactory for exactly this scenario.</a>)</p>
<h2 id="hello-world-using-a-configuration-driven-container">Hello World using a Configuration-Driven Container</h2>
<p>In the above example, we configured our middleware as services, and then passed
our service container to the application. At the end, we hinted that you could
potentially define the application itself as a service.</p>
<p>Mezzio already provides a service factory for the application instance
to provide fine-grained control over your application. In this example, we'll
leverage it, defining our routes via configuration.</p>
<p>First, we're going to leverage laminas-config to merge configuration files. This is
important, as it allows us to define local, environment-specific configuration
in files that we then can exclude from our repository. This practice ensures
that things like credentials are not accidentally published in a public
repository, and also provides a mechanism for slip-streaming in
configuration based on our environment (you might use different settings in
development than in production, after all!).</p>
<p>First, install laminas-config and laminas-stdlib:</p>
<pre><code class="bash">$ composer require laminas/laminas-config laminas/laminas-stdlib
</code></pre>

<p>Now we can start creating our configuration files and container factories.</p>
<p>In <code>config/config.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

use Laminas\Stdlib\ArrayUtils;
use Laminas\Stdlib\Glob;

$config = [];
// Load configuration from autoload path
foreach (Glob::glob('config/autoload/{{,*.}global,{,*.}local}.php', Glob::GLOB_BRACE) as $file) {
    $config = ArrayUtils::merge($config, include $file);
}

// Return an ArrayObject so we can inject the config as a service in Aura.Di
// and still use array checks like ``is_array``.
return new ArrayObject($config, ArrayObject::ARRAY_AS_PROPS);
</code></pre>

<p>In <code>config/container.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

use Laminas\ServiceManager\Config;
use Laminas\ServiceManager\ServiceManager;

// Load configuration
$config = require __DIR__.'/config.php';

// Build container
$container = new ServiceManager();
(new Config($config['dependencies']))-&gt;configureServiceManager($container);

// Inject config
$container-&gt;setService('config', $config);

return $container;
</code></pre>

<p>In <code>config/autoload/dependencies.global.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

use Laminas\ServiceManager\Factory\InvokableFactory;

return [
    'dependencies' =&gt; [
        'invokables' =&gt; [
            \Application\HelloWorldAction::class =&gt; InvokableFactory::class,
            \Application\PingAction::class =&gt; InvokableFactory::class,
        ],
        'factories' =&gt; [
            \Mezzio\Application::class =&gt; \Mezzio\Container\ApplicationFactory::class,
        ],
    ],
];
</code></pre>

<p>In <code>config/autoload/routes.global.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

return [
    'routes' =&gt; [
        [
            'path' =&gt; '/',
            'middleware' =&gt; \Application\HelloWorldAction::class,
            'allowed_methods' =&gt; ['GET'],
        ],
        [
            'path' =&gt; '/ping',
            'middleware' =&gt; \Application\PingAction::class,
            'allowed_methods' =&gt; ['GET'],
        ],
    ],
];
</code></pre>

<p>In <code>src/Application/HelloWorld.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

namespace Application;

class HelloWorld
{
    public function __invoke($req, $res, $next)
    {
        $res-&gt;getBody()-&gt;write('Hello, world!');
        return $res;
    }
}
</code></pre>

<p>In <code>src/Application/Ping.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

namespace Application;

use Laminas\Diactoros\Response\JsonResponse;

class Ping
{
    public function __invoke($req, $res, $next)
    {
        return new JsonResponse(['ack' =&gt; time()]);
    }
}
</code></pre>

<p>After that’s done run:</p>
<pre><code class="bash">$ composer dump-autoload
</code></pre>

<p>Finally, in <code>public/index.php</code>, place the following:</p>
<pre><code class="php">&lt;?php

// Change to the project root, to simplify resolving paths
chdir(dirname(__DIR__));

// Setup autoloading
require 'vendor/autoload.php';

$container = include 'config/container.php';
$app       = $container-&gt;get(Mezzio\Application::class);
$app-&gt;run();
</code></pre>

<p>Notice that our index file now doesn't have any code related to setting up the
application any longer! All it does is setup autoloading, retrieve our service
container, pull the application from it, and run it. Our choices for container,
router, etc. are all abstracted, and if we change our mind later, this code will
continue to work.</p>
<p>Firing up the web server, you'll see the same responses as the previous
examples.</p>
<h2 id="hybrid-container-and-programmatic-creation">Hybrid Container and Programmatic Creation</h2>
<p>The above example may look a little daunting at first. By making everything
configuration-driven, you sometimes lose a sense for how the code all fits
together.</p>
<p>Fortunately, you can mix the two. Building on the example above, we'll add a new
route and middleware. Between pulling the application from the container and
calling <code>$app-&gt;run()</code>, add the following in your <code>public/index.php</code>:</p>
<pre><code class="php">$app-&gt;post('/post', function ($request, \Interop\Http\ServerMiddleware\DelegateInterface $delegate) {
    return new \Laminas\Diactoros\Response\TextResponse('IN POST!');
});
</code></pre>

<p>Note that we're using <code>post()</code> here; that means you'll have to use cURL, HTTPie,
Postman, or some other tool to test making a POST request to the path:</p>
<pre><code class="bash">$ curl -X POST http://localhost:8080/post
</code></pre>

<p>You should see <code>IN POST!</code> for the response!</p>
<p>Using this approach, you can build re-usable applications that are
container-driven, and add one-off routes and middleware as needed.</p>
<h3 id="using-the-container-to-register-middleware">Using the container to register middleware</h3>
<p>If you use a container to fetch your application instance, you have an
additional option for specifying middleware for the pipeline: configuration:</p>
<pre><code class="php">&lt;?php

return [
    'routes' =&gt; [
        [
            'path' =&gt; '/path/to/match',
            'middleware' =&gt; 'Middleware Service Name or Callable',
            'allowed_methods' =&gt; ['GET', 'POST', 'PATCH'],
            'options' =&gt; [
                'stuff' =&gt; 'to',
                'pass'  =&gt; 'to',
                'the'   =&gt; 'underlying router',
            ],
        ],
        // etc.
    ],
    'middleware_pipeline' =&gt; [
        // See specification below
    ],
];
</code></pre>

<p>The key to note is <code>middleware_pipeline</code>, which is an array of middlewares to
register in the pipeline; each will each be <code>pipe()</code>'d to the Application in the
order specified.</p>
<p>Each middleware specified must be in the following form:</p>
<pre><code class="php">[
    // required:
    'middleware' =&gt; 'Name of middleware service, or a callable',
    // optional:
    'path'  =&gt; '/path/to/match',
    'priority' =&gt; 1, // Integer
]
</code></pre>

<p>Priority should be an integer, and follows the semantics of
<a href="http://php.net/SplPriorityQueue">SplPriorityQueue</a>: higher numbers indicate
higher priority (top of the queue; executed earliest), while lower numbers
indicated lower priority (bottom of the queue, executed last); <em>negative values
are low priority</em>. Items of the same priority are executed in the order in which
they are attached.</p>
<p>The default priority is 1, and this priority is used by the routing and dispatch
middleware. To indicate that middleware should execute <em>before</em> these, use a
priority higher than 1.</p>
<p>The above specification can be used for all middleware, with one exception:
registration of the <em>routing</em> and/or <em>dispatch</em> middleware that Mezzio
provides. In these cases, use the following constants, which will be caught by
the factory and expanded:</p>
<ul>
<li><code>Mezzio\Application::ROUTING_MIDDLEWARE</code> for the
  routing middleware; this should always come before the dispatch middleware.</li>
<li><code>Mezzio\Application::DISPATCH_MIDDLEWARE</code> for the
  dispatch middleware.</li>
</ul>
<p>As an example:</p>
<pre><code class="php">return [
    'middleware_pipeline' =&gt; [
        [ /* ... */ ],
        Mezzio\Application::ROUTING_MIDDLEWARE,
        Mezzio\Application::DISPATCH_MIDDLEWARE,
        [ /* ... */ ],
    ],
];
</code></pre>

<blockquote>
<h4 id="place-routing-middleware-correctly">Place routing middleware correctly</h4>
<p>If you are defining routes <em>and</em> defining other middleware for the pipeline,
you <strong>must</strong> add the routing middleware. When you do so, make sure you put
it at the appropriate location in the pipeline.</p>
<p>Typically, you will place any middleware you want to execute on all requests
prior to the routing middleware. This includes utilities for bootstrapping
the application (such as injection of the <code>ServerUrlHelper</code>),
utilities for injecting common response headers (such as CORS support), etc.
Make sure these middleware specifications include the <code>priority</code> key, and that
the value of this key is greater than 1.</p>
<p>Use priority to shape the specific workflow you want for your middleware.</p>
</blockquote>
<p>Middleware items may be any <a href="../../features/middleware-types/">valid middleware</a>,
including <em>arrays</em> of middleware, which indicate a nested middleware pipeline;
these may even contain the routing and dispatch middleware constants:</p>
<pre><code class="php">return [
    'middleware_pipeline' =&gt; [
        [ /* ... */ ],
        'routing' =&gt; [
            'middleware' =&gt; [
                Mezzio\Application::ROUTING_MIDDLEWARE,
                /* ... middleware that introspects routing results ... */
                Mezzio\Application::DISPATCH_MIDDLEWARE,
            ],
            'priority' =&gt; 1,
        ],
        [ /* ... */ ],
    ],
];
</code></pre>

<blockquote>
<h4 id="pipeline-keys-are-ignored">Pipeline keys are ignored</h4>
<p>Keys in a <code>middleware_pipeline</code> specification are ignored. However, they can
be useful when merging several configurations; if multiple configuration files
specify the same key, then those entries will be merged. Be aware, however,
that the <code>middleware</code> entry for each, since it is an indexed array, will
merge arrays by appending; in other words, order will not be guaranteed within
that array after merging. If order is critical, define a middleware spec with
<code>priority</code> keys.</p>
</blockquote>
<p>The path, if specified, can only be a literal path to match, and is typically
used for segregating middleware applications or applying rules to subsets of an
application that match a common path root.</p>
<h2 id="segregating-your-application-to-a-subpath">Segregating your application to a subpath</h2>
<p>One benefit of a middleware-based application is the ability to compose
middleware and segregate them by paths. <code>Mezzio\Application</code> is itself
middleware, allowing you to do exactly that if desired.</p>
<p>In the following example, we'll assume that <code>$api</code> and <code>$blog</code> are
<code>Mezzio\Application</code> instances, and compose them into a
<code>Laminas\Stratigility\MiddlewarePipe</code>.</p>
<pre><code class="php">use Laminas\Diactoros\Server;
use Laminas\Diactoros\ServerRequestFactory;
use Laminas\Stratigility\MiddlewarePipe;

require __DIR__ . '/../vendor/autoload.php';

$app = new MiddlewarePipe();
$app-&gt;pipe('/blog', $blog);
$app-&gt;pipe('/api', $api);

$server = Server::createServerFromRequest(
    $app,
    ServerRequestFactory::fromGlobals()
);
$server-&gt;listen();
</code></pre>

<p>You could also compose them in an <code>Application</code> instance, and utilize <code>run()</code>:</p>
<pre><code class="php">$app = AppFactory::create();
$app-&gt;pipe('/blog', $blog);
$app-&gt;pipe('/api', $api);

$app-&gt;run();
</code></pre>

<p>This approach allows you to develop discrete applications and compose them
together to create a website.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <div class="table-responsive"><table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
