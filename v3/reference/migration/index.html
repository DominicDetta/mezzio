<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Migration - mezzio</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../../css/mezzio.css" rel="stylesheet">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">mezzio</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v3 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../" class="dropdown-item">Introduction</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../getting-started/quick-start/" class="dropdown-item">Quick Start</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/middleware-types/" class="dropdown-item">Middleware Types</a>
</li>
            
<li>
    <a href="../../features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../features/container/delegator-factories/" class="dropdown-item">Delegator Factories</a>
</li>
            
<li>
    <a href="../../features/container/middleware-container/" class="dropdown-item">The Middleware Container</a>
</li>
            
<li>
    <a href="../../features/container/middleware-factory/" class="dropdown-item">The Middleware Factory</a>
</li>
            
<li>
    <a href="../../features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
            
<li>
    <a href="../../features/container/config/" class="dropdown-item">Container configuration</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../features/router/route-collector/" class="dropdown-item">The Route Collector</a>
</li>
            
<li>
    <a href="../../features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../features/router/laminas-router/" class="dropdown-item">Using laminas-router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../features/template/request-handlers/" class="dropdown-item">Templated Request Handlers</a>
</li>
            
<li>
    <a href="../../features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
<li>
    <a href="../../features/modular-applications/" class="dropdown-item">Modular Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Middleware</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/middleware/routing-and-dispatch-middleware/" class="dropdown-item">Routing and Dispatch Middleware</a>
</li>
            
<li>
    <a href="../../features/middleware/implicit-methods-middleware/" class="dropdown-item">Implicit HEAD and OPTIONS Middleware</a>
</li>
            
<li>
    <a href="../../features/middleware/method-not-allowed-middleware/" class="dropdown-item">Returning Method Not Allowed</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
            
<li>
    <a href="../../features/helpers/content-length/" class="dropdown-item">Content-Length Middleware</a>
</li>
            
<li>
    <a href="../../features/helpers/template-variable-container/" class="dropdown-item">Template Variable Container</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">Autowiring routes and pipeline middleware</a>
</li>
            
<li>
    <a href="../../cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../cookbook/passing-data-between-middleware/" class="dropdown-item">Passing data between middleware</a>
</li>
            
<li>
    <a href="../../cookbook/path-segregated-routing/" class="dropdown-item">Path-segregated routing</a>
</li>
            
<li>
    <a href="../../cookbook/access-common-data-in-templates/" class="dropdown-item">Provide Access to Common Data In Templates</a>
</li>
            
<li>
    <a href="../../cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../cookbook/host-segregated-middleware/" class="dropdown-item">Segregating middleware by host</a>
</li>
            
<li>
    <a href="../../cookbook/double-pass-middleware/" class="dropdown-item">Using double-pass middleware</a>
</li>
            
<li>
    <a href="../../cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
            
<li>
    <a href="../../cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../cli-tooling/" class="dropdown-item">CLI Tooling</a>
</li>
            
<li>
    <a href="../mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Migration</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v2 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../v2/" class="dropdown-item">Mezzio: PSR-7 Middleware in Minutes</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../v2/getting-started/standalone/" class="dropdown-item">Quick Start: Standalone</a>
</li>
            
<li>
    <a href="../../../v2/getting-started/skeleton/" class="dropdown-item">Quick Start: Skeleton Installer</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/features/middleware-types/" class="dropdown-item">Middleware Types</a>
</li>
            
<li>
    <a href="../../../v2/features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v2/features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../v2/features/container/delegator-factories/" class="dropdown-item">Delegator Factories</a>
</li>
            
<li>
    <a href="../../../v2/features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../v2/features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../v2/features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v2/features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../v2/features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../v2/features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../v2/features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../v2/features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../v2/features/router/laminas-router/" class="dropdown-item">Using the Laminas Router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v2/features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../v2/features/template/middleware/" class="dropdown-item">Templated Middleware</a>
</li>
            
<li>
    <a href="../../../v2/features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../v2/features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../v2/features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v2/features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
<li>
    <a href="../../../v2/features/modular-applications/" class="dropdown-item">Modular Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Middleware</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/features/middleware/implicit-methods-middleware/" class="dropdown-item">Implicit HEAD and OPTIONS Middleware</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v2/features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../v2/features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../v2/features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
            
<li>
    <a href="../../../v2/features/helpers/content-length/" class="dropdown-item">Content-Length Middleware</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v2/features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">Autowiring routes and pipeline middleware</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">Handling multiple routes in a single class</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
            
<li>
    <a href="../../../v2/cookbook/passing-data-between-middleware/" class="dropdown-item">Passing data between middleware</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../../v2/reference/cli-tooling/" class="dropdown-item">CLI Tooling</a>
</li>
            
<li>
    <a href="../../../v2/reference/usage-examples/" class="dropdown-item">Examples</a>
</li>
            
<li>
    <a href="../../../v2/reference/mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v2/reference/migration/" class="dropdown-item">To version 2</a>
</li>
            
<li>
    <a href="../../../v2/reference/migration-to-v2-2/" class="dropdown-item">To version 2.2</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">v1 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../v1/" class="dropdown-item">Mezzio: PSR-7 Middleware in Minutes</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/getting-started/features/" class="dropdown-item">Overview and Features</a>
</li>
            
<li>
    <a href="../../../v1/getting-started/standalone/" class="dropdown-item">Quick Start: Standalone</a>
</li>
            
<li>
    <a href="../../../v1/getting-started/skeleton/" class="dropdown-item">Quick Start: Skeleton Installer</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Features</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/application/" class="dropdown-item">Applications</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Containers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/container/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/container/factories/" class="dropdown-item">Container Factories</a>
</li>
            
<li>
    <a href="../../../v1/features/container/laminas-servicemanager/" class="dropdown-item">Using laminas-servicemanager</a>
</li>
            
<li>
    <a href="../../../v1/features/container/pimple/" class="dropdown-item">Using Pimple</a>
</li>
            
<li>
    <a href="../../../v1/features/container/aura-di/" class="dropdown-item">Using Aura.Di</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Routing Adapters</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/router/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/router/interface/" class="dropdown-item">Routing Interface</a>
</li>
            
<li>
    <a href="../../../v1/features/router/uri-generation/" class="dropdown-item">URI Generation</a>
</li>
            
<li>
    <a href="../../../v1/features/router/piping/" class="dropdown-item">Routing vs Piping</a>
</li>
            
<li>
    <a href="../../../v1/features/router/aura/" class="dropdown-item">Using Aura</a>
</li>
            
<li>
    <a href="../../../v1/features/router/fast-route/" class="dropdown-item">Using FastRoute</a>
</li>
            
<li>
    <a href="../../../v1/features/router/laminas-router/" class="dropdown-item">Using the Laminas Router</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Templating</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/template/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/template/interface/" class="dropdown-item">Template Renderer Interface</a>
</li>
            
<li>
    <a href="../../../v1/features/template/middleware/" class="dropdown-item">Templated Middleware</a>
</li>
            
<li>
    <a href="../../../v1/features/template/plates/" class="dropdown-item">Using Plates</a>
</li>
            
<li>
    <a href="../../../v1/features/template/twig/" class="dropdown-item">Using Twig</a>
</li>
            
<li>
    <a href="../../../v1/features/template/laminas-view/" class="dropdown-item">Using laminas-view</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v1/features/error-handling/" class="dropdown-item">Error Handling</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Helpers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/features/helpers/intro/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../../../v1/features/helpers/url-helper/" class="dropdown-item">UrlHelper</a>
</li>
            
<li>
    <a href="../../../v1/features/helpers/server-url-helper/" class="dropdown-item">ServerUrlHelper</a>
</li>
            
<li>
    <a href="../../../v1/features/helpers/body-parse/" class="dropdown-item">Body Parsing Middleware</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../v1/features/emitters/" class="dropdown-item">Emitters</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cookbook</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/cookbook/common-prefix-for-routes/" class="dropdown-item">Prepending a common path to all routes</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/route-specific-pipeline/" class="dropdown-item">Route-specific middleware pipelines</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/custom-404-page-handling/" class="dropdown-item">Setting custom 404 page handling</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-custom-view-helpers/" class="dropdown-item">Registering custom view helpers when using laminas-view</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-laminas-form-view-helpers/" class="dropdown-item">Using laminas-form view helpers</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-a-base-path/" class="dropdown-item">Using Mezzio from a subdirectory</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/modular-layout/" class="dropdown-item">Building modular applications</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">Setting a locale based on a routing parameter</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">Setting a locale without a routing parameter</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/debug-toolbars/" class="dropdown-item">Enabling debug toolbars</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">Handling multiple routes in a single class</a>
</li>
            
<li>
    <a href="../../../v1/cookbook/flash-messengers/" class="dropdown-item">Flash Messengers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/why-mezzio/" class="dropdown-item">Why choose Mezzio?</a>
</li>
            
<li>
    <a href="../../../v1/reference/usage-examples/" class="dropdown-item">Examples</a>
</li>
            
<li>
    <a href="../../../v1/reference/mezzio-projects/" class="dropdown-item">Mezzio Projects</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../v1/reference/migration/rc-to-v1/" class="dropdown-item">From RC5 and Earlier</a>
</li>
            
<li>
    <a href="../../../v1/reference/migration/to-v1-1/" class="dropdown-item">To Mezzio 1.1</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">_hidden-legacy-page-links <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../getting-started/features/" class="dropdown-item">_getting_started_overview</a>
</li>
                                    
<li>
    <a href="../../../getting-started/standalone/" class="dropdown-item">_getting_started_standalone</a>
</li>
                                    
<li>
    <a href="../../../getting-started/skeleton/" class="dropdown-item">_getting_started_skeleton</a>
</li>
                                    
<li>
    <a href="../../../features/middleware-types/" class="dropdown-item">_features_middleware_types</a>
</li>
                                    
<li>
    <a href="../../../features/application/" class="dropdown-item">_features_application</a>
</li>
                                    
<li>
    <a href="../../../features/container/intro/" class="dropdown-item">_features_container_intro</a>
</li>
                                    
<li>
    <a href="../../../features/container/factories/" class="dropdown-item">_features_container_factories</a>
</li>
                                    
<li>
    <a href="../../../features/container/delegator-factories/" class="dropdown-item">_features_container_delegator_factories</a>
</li>
                                    
<li>
    <a href="../../../features/container/laminas-servicemanager/" class="dropdown-item">_features_container_using_laminas-servicemanager</a>
</li>
                                    
<li>
    <a href="../../../features/container/pimple/" class="dropdown-item">_features_container_using_pimple</a>
</li>
                                    
<li>
    <a href="../../../features/container/aura-di/" class="dropdown-item">_features_container_using_aura.di</a>
</li>
                                    
<li>
    <a href="../../../features/router/intro/" class="dropdown-item">_features_router_introduction</a>
</li>
                                    
<li>
    <a href="../../../features/router/interface/" class="dropdown-item">_features_router_interface</a>
</li>
                                    
<li>
    <a href="../../../features/router/uri-generation/" class="dropdown-item">_features_router_uri_generation</a>
</li>
                                    
<li>
    <a href="../../../features/router/piping/" class="dropdown-item">_features_router_piping</a>
</li>
                                    
<li>
    <a href="../../../features/router/aura/" class="dropdown-item">_features_router_using_aura</a>
</li>
                                    
<li>
    <a href="../../../features/router/fast-route/" class="dropdown-item">_features_router_using_fastroute</a>
</li>
                                    
<li>
    <a href="../../../features/router/laminas-router/" class="dropdown-item">_features_router_using_the Laminas Router</a>
</li>
                                    
<li>
    <a href="../../../features/template/intro/" class="dropdown-item">_features_template_intro</a>
</li>
                                    
<li>
    <a href="../../../features/template/interface/" class="dropdown-item">_features_template_interface</a>
</li>
                                    
<li>
    <a href="../../../features/template/middleware/" class="dropdown-item">_features_template_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/template/plates/" class="dropdown-item">_features_template_plates</a>
</li>
                                    
<li>
    <a href="../../../features/template/twig/" class="dropdown-item">_features_template_twig</a>
</li>
                                    
<li>
    <a href="../../../features/template/laminas-view/" class="dropdown-item">_features_template_laminas-view</a>
</li>
                                    
<li>
    <a href="../../../features/error-handling/" class="dropdown-item">_features_error_handling</a>
</li>
                                    
<li>
    <a href="../../../features/modular-applications/" class="dropdown-item">_features_modular_applications</a>
</li>
                                    
<li>
    <a href="../../../features/middleware/implicit-methods-middleware/" class="dropdown-item">_features_middleware_implicit_head_and_options_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/intro/" class="dropdown-item">_features_helpers_intro</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/url-helper/" class="dropdown-item">_features_helpers_urlhelper</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/server-url-helper/" class="dropdown-item">_features_helpers_serverurlhelper</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/body-parse/" class="dropdown-item">_features_helpers_body_parsing_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/helpers/content-length/" class="dropdown-item">_features_helpers_content_length_middleware</a>
</li>
                                    
<li>
    <a href="../../../features/emitters/" class="dropdown-item">_features_emitters</a>
</li>
                                    
<li>
    <a href="../../../cookbook/autowiring-routes-and-pipelines/" class="dropdown-item">_cookbook_autowiring_routes_and_pipeline_middleware</a>
</li>
                                    
<li>
    <a href="../../../cookbook/common-prefix-for-routes/" class="dropdown-item">_cookbook_prepending_a_common_path_to_all_routes</a>
</li>
                                    
<li>
    <a href="../../../cookbook/route-specific-pipeline/" class="dropdown-item">_cookbook_route-specific_middleware_pipelines</a>
</li>
                                    
<li>
    <a href="../../../cookbook/custom-404-page-handling/" class="dropdown-item">_cookbook_setting_custom_404_page_handling</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-custom-view-helpers/" class="dropdown-item">_cookbook_registering_custom_view_helpers_when_using_laminas-view</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-laminas-form-view-helpers/" class="dropdown-item">_cookbook_using_laminas-form_view_helpers</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-a-base-path/" class="dropdown-item">_cookbook_using_Mezzio_from_a_subdirectory</a>
</li>
                                    
<li>
    <a href="../../../cookbook/modular-layout/" class="dropdown-item">_cookbook_building_modular_applications</a>
</li>
                                    
<li>
    <a href="../../../cookbook/setting-locale-depending-routing-parameter/" class="dropdown-item">_cookbook_setting_a_locale_based_on_a_routing_parameter</a>
</li>
                                    
<li>
    <a href="../../../cookbook/setting-locale-without-routing-parameter/" class="dropdown-item">_cookbook_setting_a_locale_without_a_routing_parameter</a>
</li>
                                    
<li>
    <a href="../../../cookbook/debug-toolbars/" class="dropdown-item">_cookbook_enabling_debug_toolbars</a>
</li>
                                    
<li>
    <a href="../../../cookbook/using-routed-middleware-class-as-controller/" class="dropdown-item">_cookbook_handling_multiple_routes_in_a_single_class</a>
</li>
                                    
<li>
    <a href="../../../cookbook/flash-messengers/" class="dropdown-item">_cookbook_flash_messengers</a>
</li>
                                    
<li>
    <a href="../../../cookbook/passing-data-between-middleware/" class="dropdown-item">_cookbook_passing_data_between_middleware</a>
</li>
                                    
<li>
    <a href="../../../why-mezzio/" class="dropdown-item">_reference_why_mezzio?</a>
</li>
                                    
<li>
    <a href="../../../reference/cli-tooling/" class="dropdown-item">_reference_cli_tooling</a>
</li>
                                    
<li>
    <a href="../../../reference/usage-examples/" class="dropdown-item">_reference_usage_examples</a>
</li>
                                    
<li>
    <a href="../../../reference/mezzio-projects/" class="dropdown-item">_reference_mezzio_Projects</a>
</li>
                                    
<li>
    <a href="../../../reference/migration/to-v2/" class="dropdown-item">_migration_to_v2</a>
</li>
                                    
<li>
    <a href="../../../reference/migration/rc-to-v1/" class="dropdown-item">_migration_from_rc5_and_earlier</a>
</li>
                                    
<li>
    <a href="../../../reference/migration/to-v1-1/" class="dropdown-item">_migration_to_mezzio_1.1</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../mezzio-projects/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../../v2/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/mezzio/mezzio/edit/master/docs/v3/reference/migration.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#migration-to-mezzio-30" class="nav-link">Migration to Mezzio 3.0</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#php-71-support" class="nav-link">PHP 7.1 support</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#psr-15-support" class="nav-link">PSR-15 Support</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#new-dependencies" class="nav-link">New dependencies</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#new-features" class="nav-link">New features</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#signature-and-behavior-changes" class="nav-link">Signature and behavior changes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#removed-classes-and-traits" class="nav-link">Removed classes and traits</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#upgrading" class="nav-link">Upgrading</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="migration-to-mezzio-30">Migration to Mezzio 3.0</h1>
<p>Mezzio 3.0 should not result in many upgrade problems for users. However,
starting in this version, we offer a few changes affecting the following that
you should be aware of, and potentially update your application to adopt:</p>
<ul>
<li><a href="#php-7.1-support">PHP 7.1 support</a></li>
<li><a href="#psr-15-support">PSR-15 support</a></li>
<li><a href="#new-dependencies">New dependencies</a></li>
<li><a href="#new-features">New features</a></li>
<li><a href="#signature-and-behavior-changes">Signature and behavior changes</a></li>
<li><a href="#removed-classes-and-traits">Removed classes and traits</a></li>
<li><a href="#upgrading">Upgrading from v2</a></li>
</ul>
<h2 id="php-71-support">PHP 7.1 support</h2>
<p>Starting in Mezzio 3.0 we support only PHP 7.1+.</p>
<h2 id="psr-15-support">PSR-15 Support</h2>
<p>All middleware and delegators now implement interfaces from
<a href="https://www.php-fig.org/psr/psr-15">PSR-15</a> instead of
http-interop/http-middleware (a PSR-15 precursor). This means the following
changes were made throughout Mezzio:</p>
<ul>
<li>
<p>The <code>process()</code> method of all middleware now type hint the second argument
  against the PSR-15 <code>RequestHandlerInterface</code>, instead of the previous
  <code>DelegateInterface</code>.</p>
</li>
<li>
<p>The <code>process()</code> method of all middleware now have a return type hint of
  <code>\Psr\Http\Message\ResponseInterface</code>.</p>
</li>
<li>
<p>All "delegators" have become request handlers: these now implement the PSR-15
  interface <code>RequestHandlerInterface</code> instead of the former <code>DelegateInterface</code>.</p>
</li>
<li>
<p>The <code>process()</code> method of handlers (formerly delegators) have been renamed to
  <code>handle()</code> and given a return type hint of
  <code>\Psr\Http\Message\ResponseInterface</code>.</p>
</li>
</ul>
<p>This change also affects all middleware you, as an application developer, have
written, and your middleware will need to be update. We provide a tool for this
via mezzio-tooling. Make sure that package is up-to-date (a version 1
release should be installed), and run the following:</p>
<pre><code class="php">$ ./vendor/bin/mezzio migrate:interop-middleware
</code></pre>

<p>This tool will locate any http-interop middleware and update it to PSR-15
middleware.</p>
<h2 id="new-dependencies">New dependencies</h2>
<p>Mezzio adds the following packages as dependencies:</p>
<ul>
<li>
<p><a href="https://github.com/php-fig/http-server-middleware">psr/http-server-middleware</a>
  provides the PSR-15 interfaces, and replaces the previous dependency on
  http-interop/http-middleware.</p>
</li>
<li>
<p><a href="https://github.com/mezzio/mezzio-router">mezzio/mezzio-router</a>;
  previously, we depended on this package indirectly; now it is a direct
  requirement.</p>
</li>
<li>
<p><a href="https://github.com/mezzio/mezzio-tooling">mezzio/mezzio-tooling</a>;
  this was suggested previously, but is now required as a development
  dependency.</p>
</li>
<li>
<p><a href="https://github.com/laminas/laminas-httphandlerrunner">laminas/laminas-httphandlerrunner</a>;
  this is now used for the purposes of marshaling the server request, dispatching
  the application, and emitting the response. The functionality is generalized
  enough to warrant a separate package.</p>
</li>
</ul>
<h2 id="new-features">New features</h2>
<p>The following classes were added in version 3:</p>
<ul>
<li>
<p><code>Mezzio\Container\ApplicationConfigInjectionDelegator</code> is a
  <a href="../../features/container/delegator-factories/">delegator factory</a> capable of
  piping and routing middleware from configuration. See the <a href="../../cookbook/autowiring-routes-and-pipelines/">recipe on
  autowiring routes and pipeline middleware</a>
  for more information.</p>
</li>
<li>
<p><code>Mezzio\Container\ApplicationPipelineFactory</code> will produce an empty
  <code>MiddlewarePipe</code> for use with <code>Mezzio\Application</code>.</p>
</li>
<li>
<p><code>Mezzio\Container\EmitterFactory</code> will produce a
  <code>Laminas\HttpHandlerRunner\Emitter\EmitterStack</code> instance for use with the
  <code>RequestHandlerRunner</code> instance composed by the <code>Application</code>. See the
  <a href="../../features/emitters/">chapter on emitters</a> for more details.</p>
</li>
<li>
<p><code>Mezzio\Container\MiddlewareContainerFactory</code> will produce a
  <code>MiddlewareContainer</code> composing the application container instance.</p>
</li>
<li>
<p><code>Mezzio\Container\MiddlewareFactoryFactory</code> will produce a
  <code>MiddlewareFactory</code> composing a <code>MiddlewareContainer</code> instance.</p>
</li>
<li>
<p><code>Mezzio\Container\RequestHandlerRunnerFactory</code> will produce a
  <code>Laminas\HttpHandlerRunner\RequestHandlerRunner</code> instance for use with the
  <code>Application</code> instance. See the <a href="https://docs.laminas.dev/laminas-httphandlerrunner">laminas-httphandlerrunner
  documentation</a> for more
  details on this collaborator.</p>
</li>
<li>
<p><code>Mezzio\Container\ServerRequestErrorResponseGeneratorFactory</code> will
  produce a <code>Mezzio\Response\ServerRequestErrorResponseGenerator</code>
  instance for use with the <code>RequestHandlerRunner</code>.</p>
</li>
<li>
<p><code>Mezzio\Container\ServerRequestFactoryFactory</code> will produce a PHP
  callable capable of generating a PSR-7 <code>ServerRequestInterface</code> instance for use
  with the <code>RequestHandlerRunner</code>.</p>
</li>
<li>
<p><code>Mezzio\MiddlewareContainer</code> decorates a PSR-11 container, and
  ensures that the values pulled are PSR-15 <code>MiddlewareInterface</code> instances.
  If the container returns a PSR-15 <code>RequestHandlerInterface</code>, it decorates it
  via <code>Laminas\Stratigility\Middleware\RequestHandlerMiddleware</code>. All other types
  result in an exception being thrown.</p>
</li>
<li>
<p><code>Mezzio\MiddlewareFactory</code> allows creation of <code>MiddlewareInterface</code>
  instances from a variety of argument types, and is used by <code>Application</code> to
  allow piping and routing to middleware services, arrays of services, and more.
  It composes a <code>MiddlewareContainer</code> internally.</p>
</li>
<li>
<p><code>Mezzio\Response\ServerRequestErrorResponseGenerator</code> can act as a
  response generator for the <code>RequestHandlerRunner</code> when its composed server
  request factory raises an exception.</p>
</li>
</ul>
<h2 id="signature-and-behavior-changes">Signature and behavior changes</h2>
<p>The following signature changes were made that could affect <em>class extensions</em>
and/or consumers.</p>
<h3 id="application">Application</h3>
<p><code>Mezzio\Application</code> was refactored dramatically for version 3.</p>
<p>If you were instantiating it directly previously, the constructor arguments are
now, in order:</p>
<ul>
<li><code>Mezzio\MiddlewareFactory</code></li>
<li><code>Laminas\Stratigility\MiddlewarePipeInterface</code></li>
<li><code>Mezzio\Router\RouteCollector</code></li>
<li><code>Laminas\HttpHandlerRunner\RequestHandlerRunner</code></li>
<li><code>Mezzio\Application::__construct(...)</code></li>
</ul>
<p><code>Application</code> no longer supports piping or routing to double-pass middleware. If
you continue to need double-pass middleware (e.g., defined by a third-party
library), use <code>Laminas\Stratigility\doublePassMiddleware()</code> to decorate it prior to
piping or routing to it:</p>
<pre><code class="php">use Laminas\Diactoros\Response;

use function Laminas\Stratigility\doublePassMiddleware;

$app-&gt;pipe(doublePassMiddleware($someDoublePassMiddleware, new Response()));

$app-&gt;get('/foo', doublePassMiddleware($someDoublePassMiddleware, new Response()));
</code></pre>

<p>Additionally, the following methods were <strong>removed</strong>:</p>
<ul>
<li><code>pipeRoutingMiddleware()</code>: use <code>pipe(\Mezzio\Router\Middleware\RouteMiddleware::class)</code>
  instead.</li>
<li><code>pipeDispatchMiddleware()</code>: use <code>pipe(\Mezzio\Router\Middleware\DispatchMiddleware::class)</code>
  instead.</li>
<li><code>getContainer()</code></li>
<li><code>getDefaultDelegate()</code>: ensure you pipe middleware or a request handler
  capable of returning a response at the innermost layer;
  <code>Mezzio\Handler\NotFoundHandler</code> can be used for this.</li>
<li><code>getEmitter()</code>: use the <code>Laminas\HttpHandlerRunner\Emitter\EmitterInterface</code> service from the container.</li>
<li><code>injectPipelineFromConfig()</code>: use the new <code>ApplicationConfigInjectionDelegator</code> and/or the static method of the same name it defines.</li>
<li><code>injectRoutesFromConfig()</code>: use the new <code>ApplicationConfigInjectionDelegator</code> and/or the static method of the same name it defines.</li>
</ul>
<h3 id="applicationfactory">ApplicationFactory</h3>
<p><code>Mezzio\Container\ApplicationFactory</code> no longer looks at the
<code>mezzio.programmatic_pipeline</code> flag, nor does it inject pipeline
middleware and/or routed middleware from configuration any longer.</p>
<p>If you want to use configuration-driven pipelines and/or middleware, you may
register the new class <code>Mezzio\Container\ApplicationConfigInjectionDelegator</code>
as a delegator factory on the <code>Mezzio\Application</code> service.</p>
<h3 id="notfoundhandlerfactory">NotFoundHandlerFactory</h3>
<p><code>Mezzio\Container\NotFoundHandlerFactory</code> now returns an instance of
<code>Mezzio\Handler\NotFoundHandler</code>, instead of
<code>Mezzio\Middleware\NotFoundHandler</code> (which has been removed).</p>
<h3 id="lazyloadingmiddleware">LazyLoadingMiddleware</h3>
<p><code>Mezzio\Middleware\LazyLoadingMiddleware</code> now composes a
<code>Mezzio\MiddlewareContainer</code> instance instead of a more general PSR-11
container; this is to ensure that the value returned is a PSR-15
<code>MiddlewareInterface</code> instance.</p>
<h2 id="removed-classes-and-traits">Removed classes and traits</h2>
<ul>
<li>
<p><code>Mezzio\AppFactory</code> was removed. If you were using it previously,
  either use <code>Mezzio\Application</code> directly, or a
  <code>Laminas\Stratigility\MiddlewarePipe</code> instance.</p>
</li>
<li>
<p><code>Mezzio\ApplicationConfigInjectionTrait</code>; the functionality of this
  trait was replaced by the <code>Mezzio\Container\ApplicationConfigInjectionDelegator</code>.</p>
</li>
<li>
<p><code>Mezzio\Delegate\NotFoundDelegate</code>; use <code>Mezzio\Handler\NotFoundHandler</code>
  instead. Its factory, <code>Mezzio\Container\NotFoundDelegateFactory</code>, was
  also removed.</p>
</li>
<li>
<p><code>Mezzio\Emitter\EmitterStack</code>; use <code>Laminas\HttpHandlerRunner\Emitter\EmitterStack</code>
  instead.</p>
</li>
<li>
<p><code>Mezzio\IsCallableInteropMiddlewareTrait</code>; there is no functional
  equivalent, nor a need for this functionality as of version 3.</p>
</li>
<li>
<p><code>Mezzio\MarshalMiddlewareTrait</code>; the functionality of this trait was
  replaced by a combination of <code>Mezzio\MiddlewareContainer</code> and
  <code>Mezzio\MiddlewareFactory</code>.</p>
</li>
<li>
<p><code>Mezzio\Middleware\DispatchMiddleware</code>; use
  <code>Mezzio\Router\Middleware\DispatchMiddleware</code> instead.</p>
</li>
<li>
<p><code>Mezzio\Middleware\ImplicitHeadMiddleware</code>; use
  <code>Mezzio\Router\Middleware\ImplicitHeadMiddleware</code> instead.</p>
</li>
<li>
<p><code>Mezzio\Middleware\ImplicitOptionsMiddleware</code>; use
  <code>Mezzio\Router\Middleware\ImplicitOptionsMiddleware</code> instead.</p>
</li>
<li>
<p><code>Mezzio\Middleware\NotFoundHandler</code>; use <code>Mezzio\Handler\NotFoundHandler</code>
  instead.</p>
</li>
<li>
<p><code>Mezzio\Middleware\RouteMiddleware</code>; use
  <code>Mezzio\Router\Middleware\RouteMiddleware</code> instead.</p>
</li>
</ul>
<h2 id="upgrading">Upgrading</h2>
<p>We provide a package you can add to your existing v2 application in order to
upgrade it to version 3.</p>
<p>Before installing and running the migration tooling, make sure you have checked
in your latest changes (assuming you are using version control), or have a
backup of your existing code.</p>
<p>Install the migration tooling using the following command:</p>
<pre><code class="bash">$ composer require --dev mezzio/mezzio-migration
</code></pre>

<p>Once installed, run the following command to migrate your application:</p>
<pre><code class="bash">$ ./vendor/bin/mezzio-migration migrate
</code></pre>

<p>This package does the following:</p>
<ul>
<li>Uninstalls all current dependencies (by removing the <code>vendor/</code> directory).</li>
<li>Updates existing dependency constraints for known Mezzio packages to their
  latest stable versions. (See the tools <a href="https://github.com/mezzio/mezzio-migration">README</a>
  for details on what versions of which packages the tool uses.)</li>
<li>Adds development dependencies on laminas/laminas-component-installer and
  mezzio/mezzio-tooling.</li>
<li>Updates the <code>config/pipeline.php</code> file to:<ul>
<li>add strict type declarations.</li>
<li>modify it to return a callable, per the v3 skeleton.</li>
<li>update the middleware pipeline as follows:<ul>
<li><code>pipeRoutingMiddleware()</code> becomes a <code>pipe()</code> operation referencing the
  mezzio-router <code>RouteMiddleware</code>.</li>
<li><code>pipeDispatchMiddleware()</code> becomes a <code>pipe()</code> operation referencing the
  mezzio-router <code>DispatchMiddleware</code>.</li>
<li>update references to <code>ImplicitHeadMiddleware</code> to reference the version
  in mezzio-router.</li>
<li>update references to <code>ImplicitOptionsMiddleware</code> to reference the version
  in mezzio-router.</li>
<li>update references to <code>Mezzio\Middleware\NotFoundHandler</code> to
  reference <code>Mezzio\Handler\NotFoundHandler</code>.</li>
<li>add a <code>pipe()</code> entry for the mezzio-router
  <code>MethodNotAllowedMiddleware</code>.</li>
</ul>
</li>
</ul>
</li>
<li>Updates the <code>config/routes.php</code> file to:<ul>
<li>add strict type declarations.</li>
<li>modify it to return a callable, per the v3 skeleton.</li>
</ul>
</li>
<li>Replaces the <code>public/index.php</code> file with the latest version from the skeleton.</li>
<li>Updates <code>config/container.php</code> when Pimple or Aura.Di are in use:<ul>
<li>For Pimple:<ul>
<li>The package <code>xtreamwayz/pimple-container-interop</code> is replaced with
  <code>laminas/laminas-pimple-config</code>.</li>
<li>The Pimple variant of <code>container.php</code> from the v3 skeleton is used.</li>
</ul>
</li>
<li>For Aura.Di<ul>
<li>The package <code>aura/di</code> is replaced with <code>laminas/laminas-auradi-config</code>.</li>
<li>The Aura.Di variant of <code>container.php</code> from the v3 skeleton is used.</li>
</ul>
</li>
</ul>
</li>
<li>Executes <code>./vendor/bin/mezzio migrate:interop-middleware</code>.</li>
<li>Executes <code>./vendor/bin/mezzio migrate:middleware-to-request-handler</code>.</li>
<li>Runs <code>./vendor/bin/phpcbf</code> if it is installed.</li>
</ul>
<p>These steps should take care of most migration tasks.</p>
<p>It <strong>does not</strong> update unit tests. These cannot be automatically updated, due to
the amount of variance in testing strategies.</p>
<p>When done, use a diffing tool to compare and verify all changes. Please be aware
that the tool is not designed for edge cases; there may be things it does not do
or cannot catch within your code. When unsure, refer to the other sections in
this document to determine what else you may need to change.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <div class="table-responsive"><table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
